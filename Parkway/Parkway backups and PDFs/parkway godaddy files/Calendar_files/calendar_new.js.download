function GetJSONDate(jsonDateString){if(!jsonDateString)return null;var k;if(typeof jsonDateString=="string"){var isoRegPlus=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2}).([0-9]{6}).*$/,isoReg=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2}).*$/,yyyyMMdd=/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/,newReg=/^new/,stdReg=/^\\\/Date\(([0-9]{13})-([0-9]{4})\)\\\/$/;return(k=jsonDateString.match(isoRegPlus))?new Date(k[1],k[2]-1,k[3],k[4],k[5]):(k=jsonDateString.match(isoReg))?new Date(k[1],k[2]-1,k[3],k[4],k[5]):(k=jsonDateString.match(yyyyMMdd))?new Date(k[1],k[2]-1,k[3]):(k=jsonDateString.match(stdReg))?new Date(k[1]):(k=jsonDateString.match(newReg))?eval("("+jsonDateString+")"):null}}function isSingleDay(a){return a.StartJSONDateTime.getDate()==a.EndJSONDateTime.getDate()&&a.StartJSONDateTime.getMonth()==a.EndJSONDateTime.getMonth()&&a.StartJSONDateTime.getFullYear()==a.EndJSONDateTime.getFullYear()}function getEventDetails(a,b){var c='<div class="calendarTooltip"><div><b>What:</b> {0}</div><div><b>Where:</b> {3}</div><div><b>When:</b> {1}{2}</div><div><b>Description:</b> {4}</div>{5}</div>';return c=c.replace("{0}",a.Title),a.AllDay=="true"?(a.isSingleDay?c=c.replace("{1}",a.StartJSONDateTime.toString("MMM d")+" (All Day)"):c=c.replace("{1}",a.StartJSONDateTime.toString("MMM d - ")+a.EndJSONDateTime.toString("MMM d")+" (All Day)"),c=c.replace("{2}","")):a.isSingleDay?(c=c.replace("{1}",a.StartJSONDateTime.toString("MMM d, h:mm tt")),c=c.replace("{2}",a.EndJSONDateTime.toString(" - h:mm tt"))):(c=c.replace("{1}",a.StartJSONDateTime.toString("MMM d, h:mm tt")),c=c.replace("{2}",a.EndJSONDateTime.toString(" - MMM d, h:mm tt"))),c=c.replace("{3}",a.Location),c=c.replace("{4}",a.Description),b?c=c.replace("{5}",'<br/><div class="footnote" style="font-size: 10px;">Click name to open event.</div>'):c=c.replace("{5}",""),c}function getEventUid(a){return a.id.substring(6,42)}function getShortDate(a,b){return a.AllDay=="true"?"All Day":b.toString("h:mmt")}function getShortTitle(a){var b=a.replace(/<(?:.|\s)*?>/g,"");return b.length<=20?b:b.substring(0,20)}function getShortTitle2(a){var b=a.replace(/<(?:.|\s)*?>/g,"");return b.length<=60?b:b.substring(0,60)}var ids={head:"#CalendarHead",body:"#CalendarBody",bodyOnly:"CalendarBody"},calendars=[];(function(a){a.fn.RenderEventCalendar=function(b){function n(){b.editing||(b.onEventBlockClick=function(c,d){var e="center";return b.centerByPage==1&&a.browser.msie==1&&(e=new Array((document.body.clientWidth-350)/2,d.pageY)),a(getEventDetails(c)).dialog({title:"Event Details",resizable:!1,modal:!0,width:"350px",position:e}),!0}),o()}function o(){try{b.uid?a.ajax({type:"GET",url:(b.calendarPath?b.calendarPath:"data/calendars.xml")+"?d="+(new Date).getTime(),dataType:a.browser.msie?"text":"xml",success:function(a){p(a)},error:r}):r()}catch(c){r()}}function p(b){if(typeof b=="string"){var c=b;b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(c)}a("NamedColor",b).each(s),a("Calendar",b).each(t),r()}function q(){d=null,e=null,f=null,h=null}function r(){if(b.isStatic||!b.uid)b.display=!0;if(!b.display)return;h=i,c.compact&&(c.height=200,c.width=null);if(k){for(var a=0;a<k.length;a++)g.push(k[a]);for(var a=0;a<g.length;a++)g[a].StartJSONDateTime=GetJSONDate(g[a].StartDateTime),g[a].EndJSONDateTime=GetJSONDate(g[a].EndDateTime),g[a].isSingleDay=isSingleDay(g[a])}var d=null;if(c.printing){if(c.calendarView=="monthly")d=new Date(b.printYear,b.printMonth,1);else if(c.calendarView=="daily"||c.calendarView=="weekly")d=new Date(b.printYear,b.printMonth,b.printDate);x(d)}else x()}function s(b,c){i[i.length]={Uid:a(this).find("Uid").text(),Name:a(this).find("Name").text(),Value:a(this).find("Value").text(),Border:j[b%6]}}function t(c,d){if(!b.editing&&u(d,"Active")=="false")return;var e=u(d,"Uid");e==b.uid&&(k.length=0,g.length=0,b.display=!0,a("Event",d).each(v))}function u(a,b){for(var c=0;c<a.childNodes.length;c++)if(a.childNodes[c].nodeName==b)return a.childNodes[c].text?a.childNodes[c].text:a.childNodes[c].textContent}function v(){if(!b.editing&&a(this).find("Active").text()=="false")return;k[k.length]={Uid:a(this).find("Uid").text(),StartDateTime:a(this).find("From").text(),EndDateTime:a(this).find("To").text(),AllDay:a(this).find("AllDay").text(),Location:a(this).find("Location").text(),Title:a(this).find("Title").text(),Description:a(this).find("Description").text(),Color:w(this)}}function w(b){var c=a(b).find("NamedColorUid").text();if(c)for(var d=0;d<i.length;d++)if(i[d].Uid==c)return i[d];return null}function x(e){var f=c.startDate;e==undefined?(d=new Date(f.getFullYear(),f.getMonth(),1),l=l):(d=e,l=e.getMonth(),c.calendarView=="monthly"&&d.setDate(1));var g;b.editing||(b.printing?g=jQuery("<tr style='text-align:center;font-weight:bold;font-size:12pt'><td colspan='7'>"+b.title+"</td></tr>"):b.compact?g=jQuery("<tr  class='CalendarTitleCompact'><td colspan='7'>"+b.title+"</td></tr>"):g=jQuery("<tr  class='CalendarTitle'><td colspan='7'>"+b.title+"</td></tr>"));var i="navHeaderTr_"+m,j="navHeaderTd_"+m,k=jQuery("<tr id='"+i+"'><td colspan='7' id='"+j+"'></td></tr>").css({height:c.headerHeightStatic}),n=jQuery("#"+j,k),o="tdViewIcons_"+m,p="tdNav_"+m,q="tdPrint_"+m,r=jQuery("<table class='headerTable' border='0' cellpadding='0' cellspacing='0' width='100%'><tr ><td class='tdViewIcons'  id='"+o+"'></td><td id='"+p+"'></td><td class='tdPrint' id='"+q+"'></td></tr></table>");if(!c.isStatic&&!c.editing){k.css({height:c.headerHeightEdit});var s=jQuery('<div class="ViewIcons"></div>'),t="images/icon_calender_day_o.gif";t=c.imagePath+t;var u=jQuery('<img name="dailyIcon" src="'+t+'" alt="Daily View" />').click(function(){if(c.calendarView!="daily"){var b=c.calendarView;c.calendarView="daily",c.bodyHeight=a(ids.body+"_"+m)[0].offsetHeight+(c.compact?c.headerHeightCompact:c.headerHeightStatic);if(b=="monthly"){var e=new Date,f=new Date(e.getFullYear(),e.getMonth(),e.getDate());d.getFullYear()==f.getFullYear()&&d.getMonth()==f.getMonth()?A(f):A((new Date(d)).moveToFirstDayOfMonth())}else b=="weekly"&&(d.getDay()==0?A(d):A((new Date(d)).moveToDayOfWeek(0,-1)))}return!1}),v="images/icon_calender_week_o.gif";v=c.imagePath+v;var w=jQuery('<img name="weeklyIcon" src="'+v+'" alt="Weekly View" />').click(function(){if(c.calendarView!="weekly"){var b=c.calendarView;c.calendarView="weekly";if(b=="monthly"){c.bodyHeight=a(ids.body+"_"+m)[0].offsetHeight;var e=new Date,f=new Date(e.getFullYear(),e.getMonth(),e.getDate());d.getFullYear()==f.getFullYear()&&d.getMonth()==f.getMonth()?B(f):B((new Date(d)).moveToFirstDayOfMonth())}else b=="daily"&&(c.bodyHeight=a(ids.body+"_"+m)[0].offsetHeight-(c.compact?c.headerHeightCompact:c.headerHeightStatic),B(d))}return!1}),x="images/icon_calender_month_o.gif";x=c.imagePath+x;var I=jQuery('<img name="monthlyIcon" src="'+x+'" alt="Monthly View" /></a>').click(function(){return c.calendarView!="monthly"&&(c.calendarView="monthly",z(d)),!1});a(u).css({cursor:"pointer"}),a(w).css({cursor:"pointer"}),a(I).css({cursor:"pointer"}),s.append(u),s.append(w),s.append(I);var o="tdViewIcons_"+m;jQuery("#"+o,r).append(s)}var J=jQuery("<div class='Navigation'></div>");c.navLinks.enableNext=c.navLinks.enablePrev=!c.isStatic;if(c.navLinks.enableNext&&c.navLinks.enablePrev){switch(c.calendarView){case"monthly":var K=d.getMonth()==0?new Date(d.getFullYear()-1,11,1):new Date(d.getFullYear(),d.getMonth()-1,1),L=d.getMonth()==11?new Date(d.getFullYear()+1,0,1):new Date(d.getFullYear(),d.getMonth()+1,1);break;case"weekly":var K=new Date(d.getFullYear(),d.getMonth(),d.getDate());K.addWeeks(-1);var L=new Date(d.getFullYear(),d.getMonth(),d.getDate());L.addWeeks(1);break;case"daily":var K=new Date(d.getFullYear(),d.getMonth(),d.getDate());K.addDays(-1);var L=new Date(d.getFullYear(),d.getMonth(),d.getDate());L.addDays(1)}var M="images/arrow_left_sm2.gif";M=c.imagePath+M;var N="images/arrow_left_sm.gif";N=c.imagePath+N;var O="images/arrow_right_sm2.gif";O=c.imagePath+O;var P="images/arrow_right_sm.gif";P=c.imagePath+P;var Q=c.colors==2?M:N,R=c.colors==2?O:P,S="arrowLeftDiv_"+m,T="arrowRightDiv_"+m,U=jQuery("<div class='arrowLeftDiv' id='"+S+"'><img src='"+Q+"' title='Previous'/></div>").click(function(){return y(K),!1}),V=jQuery("<div class='arrowRightDiv' id='"+T+"'><img src='"+R+"' title='Next'/></div>").click(function(){return y(L),!1});if(c.calendarView=="daily"||c.calendarView=="weekly"){var W="datePickerDiv_"+m,X="datePickerInput_"+m,Y=jQuery("<div id='"+W+"'><input name='datePickerInput' id='"+X+"' class='datePicker' type='hidden' /></div>"),Z=jQuery(".datePicker",Y),_=c.calendarView=="weekly"?!0:!1,ba=new Date,bb=(new Date(ba.getFullYear()-1,0,1)).toString("MM/dd/yyyy"),bc=(new Date(ba.getFullYear()+3,11,31)).toString("MM/dd/yyyy");Z.datePicker({selectWeek:_,closeOnSelect:!0,startDate:bb,endDate:bc,selectDate:d}),Z.bind("dateSelected",function(a,b,d){c.calendarView=="daily"?A(b):c.calendarView=="weekly"&&B(b)})}}J.append(U);var bd="navSpan_"+m;switch(c.calendarView){case"monthly":J.append(C()),J.append(jQuery("<div>&nbsp;</div>")),J.append(D());break;case"weekly":if(d.getDay()==0)var be=new Date(d.getFullYear(),d.getMonth(),d.getDate());else var be=(new Date(d.getFullYear(),d.getMonth(),d.getDate())).moveToDayOfWeek(0,-1);var bf=(new Date(be)).addDays(6);J.append("<div><span id='"+bd+"' class='NavSpan'>"+be.toString("MMM d, yyyy")+" - "+bf.toString("MMM d, yyyy")+"</span></div>");break;case"daily":J.append("<div><span id='"+bd+"' class='NavSpan'>"+d.toString("MMM d, yyyy")+"</span></div>")}if(c.compact)if(c.calendarView=="weekly"||c.calendarView=="daily"){var bg=jQuery("#"+bd,J);bg.removeClass("NavSpan").addClass("NavSpanCompact")}J.append(V),c.calendarView!="monthly"&&J.append(Y);var bh=jQuery('<div class="PrintContainer"></div>');if(!c.isStatic&&!c.editing&&!c.printing){var bi="printcalendar.html";bi="plugins/calendar/"+bi+"?uid="+b.uid+"&year="+d.getFullYear()+"&monthName="+b.locale.months[l]+"&monthNo="+l+"&title="+b.title;switch(c.calendarView){case"monthly":bi+="&view=monthly";break;case"weekly":bi+="&date="+d.getDate()+"&view=weekly";break;case"daily":bi+="&date="+d.getDate()+"&view=daily"}var bj="images/print_calendar_icon.gif";bj=c.imagePath+bj;var bk=jQuery('<img src="'+bj+'" title="Print" style="vertical-align: middle; margin-right: 5px;" /><A class="printlink" target="_blank" href="'+bi+'">Print</A>').click(function(){return window.open(bi,"printWindow","height=650,width=600,scrollbars=yes,resizable=yes,toolbars=no,status=yes,menubar=no,location=no"),!1});a(bk).css({cursor:"pointer"}),bh.append(bk)}var p="tdNav_"+m,q="tdPrint_"+m;jQuery("#"+p,r).append(J),jQuery("#"+q,r).append(bh),n.append(r);var bl,bm;c.compact?(bl="CalendarHeadCompact_"+m,bm=jQuery("<thead class='CalendarHeadCompact' id='"+bl+"'></thead>")):(bl="CalendarHead_"+m,bm=jQuery("<thead class='CalendarHead' id='"+bl+"'></thead>")),g&&g!=""&&bm.append(g),bm.append(k);if(c.calendarView!="daily"){var bn=jQuery("<tr></tr>");c.compact?bn.css({height:c.headerHeightCompact}):bn.css({height:c.headerHeightStatic});for(var bo=c.firstDayOfWeek;bo<c.firstDayOfWeek+7;bo++){var bp=bo%7,bq=c.shortDayNames?c.locale.daysShort[bp]:c.locale.days[bp];bn.append('<th title="'+bq+'" class="DateHeader'+(bp==0||bp==6?" Weekend":"")+'"><span>'+bq+"</span></th>")}bm.append(bn)}switch(c.calendarView){case"monthly":var br=E();break;case"weekly":var br=G();break;case"daily":var br=F()}var bs;bs=jQuery("<table class='CalendarTable "+b.theme+"' cellpadding='0' cellspacing='0'></table>").append(bm,br);var bt=jQuery("#"+m);c.width!=null?bt.css("width",c.width+"%"):bt.css("width","400px"),bt.html(bs);if(h){bt.append(jQuery("<br><div id='divLegendTitle_"+m+"' class='divLegendTitle'><span class='spanLegendTitle "+b.theme+"'>Legend</span></div>"));if(c.compact){var bu=jQuery(".spanLegendTitle");bu.removeClass("spanLegendTitle").addClass("spanLegendTitleCompact")}var bv=jQuery("<tr></tr>");if(!c.printing){bv.append(jQuery("<td style='display:none;' id='defaultLegend_"+m+"' class='defaultLegend' title='Event'>"+(c.compact?"":"Event")+"</td>"));for(var bw=0;bw<h.length;bw++){var bx="legend_"+h[bw].Uid+"_"+m,by=jQuery("<td class='legend' style='display:none;background-color:"+h[bw].Value+"' id='"+bx+"'></td>");by.attr("title",h[bw].Name),c.compact?a.browser.msie&&by.css("height","6px"):by.text(h[bw].Name),bv.append(by)}}else{bv.append(jQuery("<td class='defaultLegendPrintView' title='Event' style='border: 2px solid;'>"+(c.compact?"":"Event")+"</td>"));for(var bw=0;bw<h.length;bw++){var bx="legend_"+h[bw].Uid+"_"+m,by=jQuery("<td class='legendPrintView' id='"+bx+"'></td>");by.attr("title",h[bw].Name),h[bw].Border&&(h[bw].Border=="double"?by.css({border:"4px "+h[bw].Border}):by.css({border:"2px "+h[bw].Border})),c.compact?a.browser.msie&&by.css("height","6px"):by.text(h[bw].Name),bv.append(by)}}var bz=jQuery("<tbody></tbody>").append(bv),bA=jQuery('<table class="CalendarLegendTable" cellpadding="0" cellspacing="5"></table>').append(bz);bt.append(jQuery('<div style="min-width: 200px;"></div>').append(bA))}bt.fadeIn("normal"),H(),a("#tooltip").hide(),a(document.body).unbind("mousemove")}function y(a){switch(c.calendarView){case"monthly":z(a);break;case"weekly":B(a);break;case"daily":A(a)}}function z(b){c.onMonthChanging(b),x(b),c.onMonthChanged(b),c.printing&&a("#headerLabel").text(c.locale.months[d.getMonth()]+" "+d.getFullYear())}function A(b){c.onDayChanging(b),x(b),c.onDayChanged(b),c.printing&&a("#headerLabel").text(c.locale.months[d.getMonth()]+" "+d.getDate()+", "+d.getFullYear())}function B(b){c.onWeekChanging(b),x(b),c.onWeekChanged(b);if(c.printing){if(b.getDay()==0)var d=new Date(b.getFullYear(),b.getMonth(),b.getDate());else var d=(new Date(b.getFullYear(),b.getMonth(),b.getDate())).moveToDayOfWeek(0,-1);var e=(new Date(d)).addDays(6);a("#headerLabel").text(d.toString("MMM d, yyyy")+" - "+e.toString("MMM d, yyyy"))}}function C(){var a="";for(var b=0;b<c.locale.months.length;b++)b==l?a+="<option value='"+b+"' selected>"+c.locale.months[b]+"</option>":a+="<option value='"+b+"'>"+c.locale.months[b]+"</option>";return monthSelect=jQuery("<select class='selectMonth' id='selectMonth_"+m+"'"+(c.isStatic?" disabled>":">")+a+"</select>").change(function(){var a=new Date(d.getFullYear(),this.value,1);z(a)}),jQuery("<div></div>").append(monthSelect)}function D(){var a="",b=Date.today().getFullYear();for(var e=b-1;e<=b+3;e++)e==d.getFullYear()?a+="<option value='"+e+"' selected>"+e+"</option>":a+="<option value='"+e+"'>"+e+"</option>";return yearSelect=jQuery("<select class='selectYear' id='selectYear_"+m+"'"+(c.isStatic?" disabled>":">")+a+"</select>").change(function(){var a=new Date(this.value,d.getMonth(),1);z(a)}),jQuery("<div></div>").append(yearSelect)}function E(){var b=c.startDate,h=jQuery("<tbody id='"+ids.bodyOnly+"_"+m+"'></tbody>"),i=d.getMonth()==b.getMonth()&&d.getFullYear()==b.getFullYear(),j=Date.getDaysInMonth(d.getFullYear(),d.getMonth()),k=c.firstDayOfWeek-d.getDay();k>0&&(k-=7);var l=j+Math.abs(k);e=new Date(d.getFullYear(),d.getMonth(),k+1),f=new Date(d.getFullYear(),d.getMonth()+1,7-(l%=7)==7?0:7-(l%=7),23,59,59);var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),o=0,p=c.compact?c.headerHeightCompact:c.headerHeightStatic,q=(c.height-c.labelHeight-p)/Math.ceil((j+Math.abs(k))/7);do{var r=jQuery("<tr></tr>");r.css({height:q+"px"});for(var s=0;s<7;s++){var t=(c.firstDayOfWeek+s)%7,u={"class":"DateBox"+(t==0||t==6?" Weekend ":""),date:n.toString("M/d/yyyy"),id:O(n)};k<0||k>=j?u["class"]+=" Inactive":d.setDate(k+1);var v=n.getDate();i&&k+1==b.getDate()&&(u["class"]+=" Today");var w=jQuery('<div class="DateLabel"><span>'+v+"</span></div>");!c.isStatic&&!c.printing&&w.click(function(b){c.onDayLinkClick(new Date(a(this).parent().attr("date"))),b.stopPropagation()});var x=jQuery("<td></td>").attr(u).append(w);!c.isStatic&&!c.printing&&(x.dblclick(function(b){c.onDayCellDblClick(new Date(a(this).attr("date"))),b.stopPropagation()}),x.click(function(b){c.onDayCellClick(new Date(a(this).attr("date"))),b.stopPropagation()})),c.dragableEvents&&x.droppable({hoverClass:c.hoverDroppableClass,activeClass:c.activeDroppableClass,drop:function(b,d){d.draggable.attr("style","position: relative; display: block;"),a(this).append(d.draggable);var e;return a.each(g,function(){this.EventID==d.draggable.attr("id")&&(e=this)}),c.onEventDropped(e,a(this).attr("date")),!1}}),r.append(x),k++,n.addDays(1)}o++,h.append(r)}while(k<j);return h}function F(){var a=jQuery("<tbody id='"+ids.bodyOnly+"_"+m+"'></tbody>"),b="eventsRow_"+m,d="eventsCol_"+m,e=jQuery("<tr id='"+b+"'><td align='left' valign='top' colspan='7' id='"+d+"'></td></tr>");return c.isStatic||e.css({height:c.bodyHeight}),a.append(e),a}function G(){var a=new Date,b=jQuery("<tbody id='"+ids.bodyOnly+"_"+m+"'></tbody>"),g=d.getWeekOfYear()==a.getWeekOfYear()&&d.getMonth()==a.getMonth()&&d.getFullYear()==a.getFullYear();d.getDay()==0?e=new Date(d.getFullYear(),d.getMonth(),d.getDate()):e=(new Date(d.getFullYear(),d.getMonth(),d.getDate())).moveToDayOfWeek(0,-1),f=(new Date(e)).addDays(6).addHours(24).addSeconds(-1);var h=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=jQuery("<tr></tr>");c.isStatic||i.css({height:c.bodyHeight});for(var j=0;j<7;j++){var k=(c.firstDayOfWeek+j)%7,l={"class":"DateBox"+(k==0||k==6?" Weekend ":""),date:h.toString("M/d/yyyy"),id:O(h)},n=h.getDate();g&&h.getDate()==a.getDate()&&(l["class"]+=" Today");var o=jQuery('<div class="DateLabel"><span>'+n+"</span></div>"),p=jQuery("<td></td>").attr(l).append(o);i.append(p),h.addDays(1)}return b.append(i),b}function H(){g&&g.length>0&&jQuery.each(g,function(){var a=this,b=null,d;if(a.StartJSONDateTime&&a.EndJSONDateTime)if(c.calendarView=="monthly"){if(Q(a.StartJSONDateTime,a.EndJSONDateTime)){var e=P(a.StartJSONDateTime,a.EndJSONDateTime);for(var f=0;f<e.length;f++){b=jQuery("#"+e[f],jQuery("#"+m));var g=jQuery(".DateLabel",b);if(c.compact)d=jQuery("<div>&nbsp;</div>");else if(c.editing){var h="images/delete_icon.gif";h=c.imagePath+h;var i=jQuery('<a style="float:right;"><img src=\''+h+'\'" alt="Delete" /></a>').click(function(){return U(a.Uid),!1}),j=jQuery("<div>"+getShortTitle(a.Title)+"...</div>");d=jQuery("<div>"+getShortDate(a,a.StartJSONDateTime)+"</div>").prepend(i).append(j)}else if(c.printing){var k="",l=a.Title.replace(/<(?:.|\s)*?>/g,"");a.AllDay=="true"?a.isSingleDay?k=a.StartJSONDateTime.toString("d")+" (All Day)":k=a.StartJSONDateTime.toString("d - ")+a.EndJSONDateTime.toString("d")+" (All Day)":a.isSingleDay?k=a.StartJSONDateTime.toString("h:mm tt")+a.EndJSONDateTime.toString(" - h:mm tt"):k=a.StartJSONDateTime.toString("h:mm tt")+a.EndJSONDateTime.toString(" - h:mm tt"),d=jQuery("<div>"+k+"<br />"+l+"</div>")}else d=jQuery("<div>"+getShortDate(a,a.StartJSONDateTime)+": "+getShortTitle(a.Title)+"...</div>");I(a,d,b)}}}else if(c.calendarView=="weekly"){if(Q(a.StartJSONDateTime,a.EndJSONDateTime)){var e=P(a.StartJSONDateTime,a.EndJSONDateTime);for(var f=0;f<e.length;f++){b=jQuery("#"+e[f],jQuery("#"+m));var n="";a.AllDay=="true"?n="All Day:":a.isSingleDay?n=a.StartJSONDateTime.toString("h:mm tt")+a.EndJSONDateTime.toString(" - h:mm tt")+":":n=a.StartJSONDateTime.toString("h:mm tt")+a.EndJSONDateTime.toString(" - h:mm tt")+":";if(c.compact)d=jQuery("<div>"+getShortDate(a,a.StartJSONDateTime)+": "+getShortTitle(a.Title)+"...</div>");else{var l=a.Title.replace(/<(?:.|\s)*?>/g,"");d=jQuery('<div class="DailyEvent">'+n+"<br />"+l+"</div>")}I(a,d,b)}}}else if(c.calendarView=="daily"&&R(a.StartJSONDateTime,a.EndJSONDateTime)){var o="eventsCol_"+m;b=jQuery("#"+o,jQuery("#"+m));var n="";a.AllDay=="true"?n="All Day:":a.isSingleDay?n=a.StartJSONDateTime.toString("h:mm tt")+a.EndJSONDateTime.toString(" - h:mm tt")+":":n=a.StartJSONDateTime.toString("h:mm tt")+a.EndJSONDateTime.toString(" - h:mm tt")+":";if(c.compact)d=jQuery("<div>"+getShortDate(a,a.StartJSONDateTime)+": "+getShortTitle2(a.Title)+"...</div>");else{var l=a.Title.replace(/<(?:.|\s)*?>/g,"");d=jQuery('<div class="DailyEvent">'+n+"<br />"+l+"</div>")}I(a,d,b)}}),K()}function I(a,b,d){var e;if(d!=null){if(!c.printing)if(c.compact){if(c.calendarView=="monthly")var f="Event CompactEvent";else var f="Event CompactEventWithText";e=jQuery('<div class="'+f+'" style="background-color:'+(a.Color?a.Color.Value:null)+'" id="event_'+a.Uid+"_"+m+'"></div>').append(b)}else e=jQuery('<div class="Event" style="background-color:'+(a.Color?a.Color.Value:null)+'" id="event_'+a.Uid+"_"+m+'"></div>').append(b);else c.compact?e=jQuery('<div style="font-size:8pt" class="EventPrintView CompactEvent" id="event_'+a.Uid+"_"+m+'"></div>').append(b):e=jQuery('<div style="font-size:8pt" class="EventPrintView" id="event_'+a.Uid+"_"+m+'"></div>').append(b),a.Color&&a.Color.Border?a.Color.Border=="double"?e.css({border:"4px "+a.Color.Border}):e.css({border:"2px "+a.Color.Border}):e.css({border:"2px solid"});J(a,e),e.hide(),d.append(e),e.fadeIn("normal")}}function J(a,b){c.isStatic||c.printing?b.css({cursor:"default"}):b.tooltip({track:!0,delay:0,bodyHandler:function(){return getEventDetails(a,!0)}}),a.CssClass&&b.addClass(a.CssClass),!c.isStatic&&!c.printing&&(b.dblclick(function(b){c.onEventBlockDblClick(a),b.stopPropagation()}),b.click(function(b){c.onEventBlockClick(a,b),b.stopPropagation()}),b.hover(function(){c.onEventBlockOver(a)},function(){c.onEventBlockOut(a)})),c.dragableEvents&&b.draggable({containment:ids.body})}function K(){var b=!1,d=[];if(!c.printing){a(".Event").each(function(){if(this.style.display!="none"){var a=M(this);a!=-1&&(g[a].Color?d[d.length]=g[a].Color:b=!0)}});var e="defaultLegend_"+m;b==1&&d.length>0&&a("#"+e).css("display","inline-block");var f="divLegendTitle_"+m;a("#"+f).css("display",d.length>0?"inline-block":"none"),a(".legend").each(function(a){N(this,d)&&(this.style.display="inline-block")})}else a(".EventPrintView").each(function(){if(this.style.display!="none"){var a=M(this);g[a].Color?d[d.length]=g[a].Color:b=!0}}),a(".defaultLegendPrintView").css("display",b&&d.length>0?"inline-block":"none"),a(".divLegendTitle").css("display",d.length>0?"inline-block":"none"),a(".legendPrintView").each(function(a){this.style.display=N(this,d)?"inline-block":"none"})}function L(){jQuery(".Event",jQuery("#"+m)).remove()}function M(a){var b=getEventUid(a);for(var c=0;c<g.length;c++)if(g[c].Uid==b&&a.id.search(m)>=0)return c;return-1}function N(a,b){var c=a.id.substring(7,43);for(var d=0;d<b.length;d++)if(a.id.search(m)>=0&&b[d].Uid==c)return!0;return!1}function O(a){var b=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,c=a.getDate()<10?"0"+a.getDate():a.getDate();return"c_"+b+c+a.getFullYear()+"_"+m}function P(a,b){a<e&&(a=e),b>f&&(b=f);var c=new Array,d=new Date(a.getFullYear(),a.getMonth(),a.getDate());while(d<=b)c[c.length]=O(d),d.addDays(1);return c}function Q(a,b){return a>=e&&a<=f?!0:b>=e&&b<=f?!0:a<e&&b>f?!0:!1}function R(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate());if(d>=c&&d<=b)return!0}function S(a){a&&(a.length>1?jQuery.each(a,function(){g.push(this)}):g.push(a),L(),H())}function T(a){a&&(g=a)}function U(b){a(".Event").each(function(){if(getEventUid(this)==b){if(!confirm("Are you sure you want to delete this event ?"))return!1;this.style.display="none",a("#tooltip").hide(),a(document.body).unbind("mousemove");var c=M(this);g[c].Deleted=!0,K();var d="false";d=a("#"+isEditModeClientId).val();var e=a("#"+hidSelectedCalendarClientId).val(),f=CreateEventCalendar.DeleteEventFromCalendar(d,e,b),h="";if(f){var i=f.value.split("|");i.length==2&&(h=i[0],e=i[1])}return h=="false"&&a("[id$='btnDeleteAllEvents']").hide(),tempCalendarOptions.uid=e,tempCalendarOptions.defaultYear=GetJSONDate(g[c].StartDateTime).getFullYear(),tempCalendarOptions.defaultMonth=GetJSONDate(g[c].StartDateTime).getMonth(),a("#"+m).RenderEventCalendar(tempCalendarOptions),!1}})}var c={imagePath:".",height:500,width:100,headerHeightCompact:17,headerHeightStatic:25,headerHeightEdit:30,labelHeight:25,bodyHeight:450,calendarView:"monthly",isStatic:!1,editing:!1,compact:!1,printing:!1,printDate:null,printMonth:null,printYear:null,colors:1,display:!1,firstDayOfWeek:0,startDate:new Date,dragableEvents:!1,activeDroppableClass:!1,hoverDroppableClass:!1,shortDayNames:!0,controlId:"",instance:0,title:"",defaultMonth:(new Date).getMonth(),defaultYear:(new Date).getFullYear(),theme:"Theme1",navLinks:{enableNext:!0,enablePrev:!0},onMonthChanging:function(a){return!0},onMonthChanged:function(a){return!0},onDayChanging:function(a){return!0},onDayChanged:function(a){return!0},onWeekChanging:function(a){return!0},onWeekChanged:function(a){return!0},onEventBlockClick:function(a){return!0},onEventBlockDblClick:function(a){return!0},onEventBlockOver:function(a){return!0},onEventBlockOut:function(a){return!0},onDayLinkClick:function(a){return!0},onDayCellClick:function(a){return!0},onDayCellDblClick:function(a){return!0},onEventDropped:function(a,b){return!0},locale:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekMin:"wk"}},d,e,f,g=[],h,i=[],j=new Array("dotted","dashed","double","inset","outset","ridge"),k=[],l;g.length=0,k.length=0,i.length=0,b.controlId||(b.controlId=a(this).attr("id")),b=jQuery.extend(c,b);var m=b.controlId;l=b.defaultMonth,b.defaultMonth=="current"&&(b.defaultMonth=(new Date).getMonth(),l=(new Date).getMonth()),b.defaultYear=="current"&&(b.defaultYear=(new Date).getFullYear()),b.startDate.setMonth(b.defaultMonth),b.startDate.setYear(b.defaultYear),n()}})(jQuery);var getDateFromId=function(a){return new Date(a.substring(6,10),a.substring(2,4)-1,a.substring(4,6))};Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}},Date.getMonthNumberFromName=function(a){var b=Date.CultureInfo.monthNames,c=Date.CultureInfo.abbreviatedMonthNames,d=a.toLowerCase();for(var e=0;e<b.length;e++)if(b[e].toLowerCase()==d||c[e].toLowerCase()==d)return e;return-1},Date.getDayNumberFromName=function(a){var b=Date.CultureInfo.dayNames,c=Date.CultureInfo.abbreviatedDayNames,d=Date.CultureInfo.shortestDayNames,e=a.toLowerCase();for(var f=0;f<b.length;f++)if(b[f].toLowerCase()==e||c[f].toLowerCase()==e)return f;return-1},Date.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0},Date.getDaysInMonth=function(a,b){return[31,Date.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},Date.getTimezoneOffset=function(a,b){return b||!1?Date.CultureInfo.abbreviatedTimeZoneDST[a.toUpperCase()]:Date.CultureInfo.abbreviatedTimeZoneStandard[a.toUpperCase()]},Date.getTimezoneAbbreviation=function(a,b){var c=b||!1?Date.CultureInfo.abbreviatedTimeZoneDST:Date.CultureInfo.abbreviatedTimeZoneStandard,d;for(d in c)if(c[d]===a)return d;return null},Date.prototype.clone=function(){return new Date(this.getTime())},Date.prototype.compareTo=function(a){if(isNaN(this))throw new Error(this);if(a instanceof Date&&!isNaN(a))return this>a?1:this<a?-1:0;throw new TypeError(a)},Date.prototype.equals=function(a){return this.compareTo(a)===0},Date.prototype.between=function(a,b){var c=this.getTime();return c>=a.getTime()&&c<=b.getTime()},Date.prototype.addMilliseconds=function(a){return this.setMilliseconds(this.getMilliseconds()+a),this},Date.prototype.addSeconds=function(a){return this.addMilliseconds(a*1e3)},Date.prototype.addMinutes=function(a){return this.addMilliseconds(a*6e4)},Date.prototype.addHours=function(a){return this.addMilliseconds(a*36e5)},Date.prototype.addDays=function(a){return this.addMilliseconds(a*864e5)},Date.prototype.addWeeks=function(a){return this.addMilliseconds(a*6048e5)},Date.prototype.addMonths=function(a){var b=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+a),this.setDate(Math.min(b,this.getDaysInMonth())),this},Date.prototype.addYears=function(a){return this.addMonths(a*12)},Date.prototype.add=function(a){if(typeof a=="number")return this._orient=a,this;var b=a;return(b.millisecond||b.milliseconds)&&this.addMilliseconds(b.millisecond||b.milliseconds),(b.second||b.seconds)&&this.addSeconds(b.second||b.seconds),(b.minute||b.minutes)&&this.addMinutes(b.minute||b.minutes),(b.hour||b.hours)&&this.addHours(b.hour||b.hours),(b.month||b.months)&&this.addMonths(b.month||b.months),(b.year||b.years)&&this.addYears(b.year||b.years),(b.day||b.days)&&this.addDays(b.day||b.days),this},Date._validate=function(a,b,c,d){if(typeof a!="number")throw new TypeError(a+" is not a Number.");if(a<b||a>c)throw new RangeError(a+" is not a valid value for "+d+".");return!0},Date.validateMillisecond=function(a){return Date._validate(a,0,999,"milliseconds")},Date.validateSecond=function(a){return Date._validate(a,0,59,"seconds")},Date.validateMinute=function(a){return Date._validate(a,0,59,"minutes")},Date.validateHour=function(a){return Date._validate(a,0,23,"hours")},Date.validateDay=function(a,b,c){return Date._validate(a,1,Date.getDaysInMonth(b,c),"days")},Date.validateMonth=function(a){return Date._validate(a,0,11,"months")},Date.validateYear=function(a){return Date._validate(a,1,9999,"seconds")},Date.prototype.set=function(a){var b=a;return!b.millisecond&&b.millisecond!==0&&(b.millisecond=-1),!b.second&&b.second!==0&&(b.second=-1),!b.minute&&b.minute!==0&&(b.minute=-1),!b.hour&&b.hour!==0&&(b.hour=-1),!b.day&&b.day!==0&&(b.day=-1),!b.month&&b.month!==0&&(b.month=-1),!b.year&&b.year!==0&&(b.year=-1),b.millisecond!=-1&&Date.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds()),b.second!=-1&&Date.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds()),b.minute!=-1&&Date.validateMinute(b.minute)&&this.addMinutes(b.minute-this.getMinutes()),b.hour!=-1&&Date.validateHour(b.hour)&&this.addHours(b.hour-this.getHours()),b.month!==-1&&Date.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth()),b.year!=-1&&Date.validateYear(b.year)&&this.addYears(b.year-this.getFullYear()),b.day!=-1&&Date.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate()),b.timezone&&this.setTimezone(b.timezone),b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset),this},Date.prototype.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},Date.prototype.isLeapYear=function(){var a=this.getFullYear();return a%4===0&&a%100!==0||a%400===0},Date.prototype.isWeekday=function(){return!this.is().sat()&&!this.is().sun()},Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth())},Date.prototype.moveToFirstDayOfMonth=function(){return this.set({day:1})},Date.prototype.moveToLastDayOfMonth=function(){return this.set({day:this.getDaysInMonth()})},Date.prototype.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(c===0?c+=7*(b||1):c)},Date.prototype.moveToMonth=function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(c===0?c+=12*(b||1):c)},Date.prototype.getDayOfYear=function(){return Math.floor((this-new Date(this.getFullYear(),0,1))/864e5)},Date.prototype.getWeekOfYear=function(a){var b=this.getFullYear(),c=this.getMonth(),d=this.getDate(),e=a||Date.CultureInfo.firstDayOfWeek,f=8-(new Date(b,0,1)).getDay();f==8&&(f=1);var g=(Date.UTC(b,c,d,0,0,0)-Date.UTC(b,0,1,0,0,0))/864e5+1,h=Math.floor((g-f+7)/7);if(h===e){b--;var i=8-(new Date(b,0,1)).getDay();i==2||i==8?h=53:h=52}return h},Date.prototype.isDST=function(){return console.log("isDST"),this.toString().match(/(E|C|M|P)(S|D)T/)[2]=="D"},Date.prototype.getTimezone=function(){return Date.getTimezoneAbbreviation(this.getUTCOffset,this.isDST())},Date.prototype.setTimezoneOffset=function(a){var b=this.getTimezoneOffset(),c=Number(a)*-6/10;return this.addMinutes(c-b),this},Date.prototype.setTimezone=function(a){return this.setTimezoneOffset(Date.getTimezoneOffset(a))},Date.prototype.getUTCOffset=function(){var a=this.getTimezoneOffset()*-10/6,b;return a<0?(b=(a-1e4).toString(),b[0]+b.substr(2)):(b=(a+1e4).toString(),"+"+b.substr(1))},Date.prototype.getDayName=function(a){return a?Date.CultureInfo.abbreviatedDayNames[this.getDay()]:Date.CultureInfo.dayNames[this.getDay()]},Date.prototype.getMonthName=function(a){return a?Date.CultureInfo.abbreviatedMonthNames[this.getMonth()]:Date.CultureInfo.monthNames[this.getMonth()]},Date.prototype._toString=Date.prototype.toString,Date.prototype.toString=function(a){var b=this,c=function(b){return b.toString().length==1?"0"+b:b};return a?a.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(a){switch(a){case"hh":return c(b.getHours()<13?b.getHours():b.getHours()-12);case"h":return b.getHours()<13?b.getHours():b.getHours()-12;case"HH":return c(b.getHours());case"H":return b.getHours();case"mm":return c(b.getMinutes());case"m":return b.getMinutes();case"ss":return c(b.getSeconds());case"s":return b.getSeconds();case"yyyy":return b.getFullYear();case"yy":return b.getFullYear().toString().substring(2,4);case"dddd":return b.getDayName();case"ddd":return b.getDayName(!0);case"dd":return c(b.getDate());case"d":return b.getDate().toString();case"MMMM":return b.getMonthName();case"MMM":return b.getMonthName(!0);case"MM":return c(b.getMonth()+1);case"M":return b.getMonth()+1;case"t":return(b.getHours()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1)).toLowerCase();case"tt":return b.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"zzz":case"zz":case"z":return""}}):this._toString()},Date.now=function(){return new Date},Date.today=function(){return Date.now().clearTime()},Date.prototype._orient=1,Date.prototype.next=function(){return this._orient=1,this},Date.prototype.last=Date.prototype.prev=Date.prototype.previous=function(){return this._orient=-1,this},Date.prototype._is=!1,Date.prototype.is=function(){return this._is=!0,this},Number.prototype._dateElement="day",Number.prototype.fromNow=function(){var a={};return a[this._dateElement]=this,Date.now().add(a)},Number.prototype.ago=function(){var a={};return a[this._dateElement]=this*-1,Date.now().add(a)},function(){var a=Date.prototype,b=Number.prototype,c="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),d="january february march april may june july august september october november december".split(/\s/),e="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),f,g=function(a){return function(){return this._is?(this._is=!1,this.getDay()==a):this.moveToDayOfWeek(a,this._orient)}};for(var h=0;h<c.length;h++)a[c[h]]=a[c[h].substring(0,3)]=g(h);var i=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}};for(var j=0;j<d.length;j++)a[d[j]]=a[d[j].substring(0,3)]=i(j);var k=function(a){return function(){return a.substring(a.length-1)!="s"&&(a+="s"),this["add"+a](this._orient)}},l=function(a){return function(){return this._dateElement=a,this}};for(var m=0;m<e.length;m++)f=e[m].toLowerCase(),a[f]=a[f+"s"]=k(e[m]),b[f]=b[f+"s"]=l(f)}(),Date.prototype.toJSONString=function(){return this.toString("yyyy-MM-ddThh:mm:ssZ")},Date.prototype.toShortDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortDatePattern)},Date.prototype.toLongDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.longDatePattern)},Date.prototype.toShortTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortTimePattern)},Date.prototype.toLongTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.longTimePattern)},Date.prototype.getOrdinal=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};var a=Date.Parsing,b=a.Operators={rtoken:function(b){return function(c){var d=c.match(b);if(d)return[d[0],c.substring(d[0].length)];throw new a.Exception(c)}},token:function(a){return function(a){return b.rtoken(new RegExp("^s*"+a+"s*"))(a)}},stoken:function(a){return b.rtoken(new RegExp("^"+a))},until:function(a){return function(b){var c=[],d=null;while(b.length){try{d=a.call(this,b)}catch(e){c.push(d[0]),b=d[1];continue}break}return[c,b]}},many:function(a){return function(b){var c=[],d=null;while(b.length){try{d=a.call(this,b)}catch(e){return[c,b]}c.push(d[0]),b=d[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(d){return[null,b]}return[c[0],c[1]]}},not:function(b){return function(c){try{b.call(this,c)}catch(d){return[null,c]}throw new a.Exception(c)}},ignore:function(a){return a?function(b){var c=null;return c=a.call(this,b),[null,c[1]]}:null},product:function(){var a=arguments[0],c=Array.prototype.slice.call(arguments,1),d=[];for(var e=0;e<a.length;e++)d.push(b.each(a[e],c));return d},cache:function(b){var c={},d=null;return function(e){try{d=c[e]=c[e]||b.call(this,e)}catch(f){d=c[e]=f}if(d instanceof a.Exception)throw d;return d}},any:function(){var b=arguments;return function(c){var d=null;for(var e=0;e<b.length;e++){if(b[e]==null)continue;try{d=b[e].call(this,c)}catch(f){d=null}if(d)return d}throw new a.Exception(c)}},each:function(){var b=arguments;return function(c){var d=[],e=null;for(var f=0;f<b.length;f++){if(b[f]==null)continue;try{e=b[f].call(this,c)}catch(g){throw new a.Exception(c)}d.push(e[0]),c=e[1]}return[d,c]}},all:function(){var a=arguments,b=b;return b.each(b.optional(a))},sequence:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,c.length==1?c[0]:function(b){var f=null,g=null,h=[];for(var i=0;i<c.length;i++){try{f=c[i].call(this,b)}catch(j){break}h.push(f[0]);try{g=d.call(this,f[1])}catch(k){g=null;break}b=g[1]}if(!f)throw new a.Exception(b);if(g)throw new a.Exception(g[1]);if(e)try{f=e.call(this,f[1])}catch(l){throw new a.Exception(f[1])}return[h,f?f[1]:b]}},between:function(a,c,d){d=d||a;var e=b.each(b.ignore(a),c,b.ignore(d));return function(a){var b=e.call(this,a);return[[b[0][0],r[0][2]],b[1]]}},list:function(a,c,d){return c=c||b.rtoken(/^\s*/),d=d||null,a instanceof Array?b.each(b.product(a.slice(0,-1),b.ignore(c)),a.slice(-1),b.ignore(d)):b.each(b.many(b.each(a,b.ignore(c))),px,b.ignore(d))},set:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,function(f){var g=null,h=null,i=null,j=null,k=[[],f],l=!1;for(var m=0;m<c.length;m++){i=null,h=null,g=null,l=c.length==1;try{g=c[m].call(this,f)}catch(n){continue}j=[[g[0]],g[1]];if(g[1].length>0&&!l)try{i=d.call(this,g[1])}catch(o){l=!0}else l=!0;!l&&i[1].length===0&&(l=!0);if(!l){var p=[];for(var q=0;q<c.length;q++)m!=q&&p.push(c[q]);h=b.set(p,d).call(this,i[1]),h[0].length>0&&(j[0]=j[0].concat(h[0]),j[1]=h[1])}j[1].length<k[1].length&&(k=j);if(k[1].length===0)break}if(k[0].length===0)return k;if(e){try{i=e.call(this,k[1])}catch(r){throw new a.Exception(k[1])}k[1]=i[1]}return k}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){var d=a.call(this,c);return[b,d[1]]}},process:function(a,b){return function(c){var d=a.call(this,c);return[b.call(this,d[0]),d[1]]}},min:function(b,c){return function(d){var e=c.call(this,d);if(e[0].length<b)throw new a.Exception(d);return e}}},c=function(a){return function(){var b=null,c=[];arguments.length>1?b=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(b=arguments[0]);if(!b)return a.apply(null,arguments);for(var d=0,e=b.shift();d<e.length;d++)return b.unshift(e[d]),c.push(a.apply(null,b)),b.shift(),c}},d="optional not ignore cache".split(/\s/);for(var e=0;e<d.length;e++)b[d[e]]=c(b[d[e]]);var f=function(a){return function(){return arguments[0]instanceof Array?a.apply(null,arguments[0]):a.apply(null,arguments)}},g="each any all".split(/\s/);for(var h=0;h<g.length;h++)b[g[h]]=f(b[g[h]])}(),function(){var a=function(b){var c=[];for(var d=0;d<b.length;d++)b[d]instanceof Array?c=c.concat(a(b[d])):b[d]&&c.push(b[d]);return c};Date.Grammar={},Date.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=a.length==3?Date.getMonthNumberFromName(a):Number(a)-1}},year:function(a){return function(){var b=Number(a);this.year=a.length>2?b:b+(b+2e3<Date.CultureInfo.twoDigitYearMax?2e3:1900)}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(a){a=a instanceof Array?a:[a];var b=new Date;this.year=b.getFullYear(),this.month=b.getMonth(),this.day=1,this.hour=0,this.minute=0,this.second=0;for(var c=0;c<a.length;c++)a[c]&&a[c].call(this);this.hour=this.meridian=="p"&&this.hour<13?this.hour+12:this.hour;if(this.day>Date.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var d=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?d.set({timezone:this.timezone}):this.timezoneOffset&&d.set({timezoneOffset:this.timezoneOffset}),d},finish:function(b){b=b instanceof Array?a(b):[b];if(b.length===0)return null;for(var c=0;c<b.length;c++)typeof b[c]=="function"&&b[c].call(this);if(this.now)return new Date;var d=Date.today(),e=null,f=this.days!=null||!!this.orient||!!this.operator;if(f){var g,h,i;i=this.orient=="past"||this.operator=="subtract"?-1:1,this.weekday&&(this.unit="day",g=Date.getDayNumberFromName(this.weekday)-d.getDay(),h=7,this.days=g?(g+i*h)%h:i*h),this.month&&(this.unit="month",g=this.month-d.getMonth(),h=12,this.months=g?(g+i*h)%h:i*h,this.month=null),this.unit||(this.unit="day");if(this[this.unit+"s"]==null||this.operator!=null)this.value||(this.value=1),this.unit=="week"&&(this.unit="day",this.value=this.value*7),this[this.unit+"s"]=this.value*i;return d.add(this)}return this.meridian&&this.hour&&(this.hour=this.hour<13&&this.meridian=="p"?this.hour+12:this.hour),this.weekday&&!this.day&&(this.day=d.addDays(Date.getDayNumberFromName(this.weekday)-d.getDay()).getDate()),this.month&&!this.day&&(this.day=1),d.set(this)}};var b=Date.Parsing.Operators,c=Date.Grammar,d=Date.Translator,e;c.datePartDelimiter=b.rtoken(/^([\s\-\.\,\/\x27]+)/),c.timePartDelimiter=b.stoken(":"),c.whiteSpace=b.rtoken(/^\s*/),c.generalDelimiter=b.rtoken(/^(([\s\,]|at|on)+)/);var f={};c.ctoken=function(a){var c=f[a];if(!c){var d=Date.CultureInfo.regexPatterns,e=a.split(/\s+/),g=[];for(var h=0;h<e.length;h++)g.push(b.replace(b.rtoken(d[e[h]]),e[h]));c=f[a]=b.any.apply(null,g)}return c},c.ctoken2=function(a){return b.rtoken(Date.CultureInfo.regexPatterns[a])},c.h=b.cache(b.process(b.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),d.hour)),c.hh=b.cache(b.process(b.rtoken(/^(0[0-9]|1[0-2])/),d.hour)),c.H=b.cache(b.process(b.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),d.hour)),c.HH=b.cache(b.process(b.rtoken(/^([0-1][0-9]|2[0-3])/),d.hour)),c.m=b.cache(b.process(b.rtoken(/^([0-5][0-9]|[0-9])/),d.minute)),c.mm=b.cache(b.process(b.rtoken(/^[0-5][0-9]/),d.minute)),c.s=b.cache(b.process(b.rtoken(/^([0-5][0-9]|[0-9])/),d.second)),c.ss=b.cache(b.process(b.rtoken(/^[0-5][0-9]/),d.second)),c.hms=b.cache(b.sequence([c.H,c.mm,c.ss],c.timePartDelimiter)),c.t=b.cache(b.process(c.ctoken2("shortMeridian"),d.meridian)),c.tt=b.cache(b.process(c.ctoken2("longMeridian"),d.meridian)),c.z=b.cache(b.process(b.rtoken(/^(\+|\-)?\s*\d\d\d\d?/),d.timezone)),c.zz=b.cache(b.process(b.rtoken(/^(\+|\-)\s*\d\d\d\d/),d.timezone)),c.zzz=b.cache(b.process(c.ctoken2("timezone"),d.timezone)),c.timeSuffix=b.each(b.ignore(c.whiteSpace),b.set([c.tt,c.zzz])),c.time=b.each(b.optional(b.ignore(b.stoken("T"))),c.hms,c.timeSuffix),c.d=b.cache(b.process(b.each(b.rtoken(/^([0-2]\d|3[0-1]|\d)/),b.optional(c.ctoken2("ordinalSuffix"))),d.day)),c.dd=b.cache(b.process(b.each(b.rtoken(/^([0-2]\d|3[0-1])/),b.optional(c.ctoken2("ordinalSuffix"))),d.day)),c.ddd=c.dddd=b.cache(b.process(c.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}})),c.M=b.cache(b.process(b.rtoken(/^(1[0-2]|0\d|\d)/),d.month)),c.MM=b.cache(b.process(b.rtoken(/^(1[0-2]|0\d)/),d.month)),c.MMM=c.MMMM=b.cache(b.process(c.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),d.month)),c.y=b.cache(b.process(b.rtoken(/^(\d\d?)/),d.year)),c.yy=b.cache(b.process(b.rtoken(/^(\d\d)/),d.year)),c.yyy=b.cache(b.process(b.rtoken(/^(\d\d?\d?\d?)/),d.year)),c.yyyy=b.cache(b.process(b.rtoken(/^(\d\d\d\d)/),d.year)),e=function(){return b.each(b.any.apply(null,arguments),b.not(c.ctoken2("timeContext")))},c.day=e(c.d,c.dd),c.month=e(c.M,c.MMM),c.year=e(c.yyyy,c.yy),c.orientation=b.process(c.ctoken("past future"),function(a){return function(){this.orient=a}}),c.operator=b.process(c.ctoken("add subtract"),function(a){return function(){this.operator=a}}),c.rday=b.process(c.ctoken("yesterday tomorrow today now"),d.rday),c.unit=b.process(c.ctoken("minute hour day week month year"),function(a){return function(){this.unit=a}}),c.value=b.process(b.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}}),c.expression=b.set([c.rday,c.operator,c.value,c.unit,c.orientation,c.ddd,c.MMM]),e=function(){return b.set(arguments,c.datePartDelimiter)},c.mdy=e(c.ddd,c.month,c.day,c.year),c.ymd=e(c.ddd,c.year,c.month,c.day),c.dmy=e(c.ddd,c.day,c.month,c.year),c.date=function(a){return(c[Date.CultureInfo.dateElementOrder]||c.mdy).call(this,a)},c.format=b.process(b.many(b.any(b.process(b.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(a){if(c[a])return c[a];throw Date.Parsing.Exception(a)}),b.process(b.rtoken(/^[^dMyhHmstz]+/),function(a){return b.ignore(b.stoken(a))}))),function(a){return b.process(b.each.apply(null,a),d.finishExact)});var g={},h=function(a){return g[a]=g[a]||c.format(a)[0]};c.formats=function(a){if(a instanceof Array){var c=[];for(var d=0;d<a.length;d++)c.push(h(a[d]));return b.any.apply(null,c)}return h(a)},c._formats=c.formats(["yyyy-MM-ddTHH:mm:ss","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","d"]),c._start=b.process(b.set([c.date,c.time,c.expression],c.generalDelimiter,c.whiteSpace),d.finish),c.start=function(a){try{var b=c._formats.call({},a);if(b[1].length===0)return b}catch(d){}return c._start.call({},a)}}(),Date._parse=Date.parse,Date.parse=function(a){var b=null;if(!a)return null;try{b=Date.Grammar.start.call({},a)}catch(c){return null}return b[1].length===0?b[0]:null},Date.getParseFunction=function(a){var b=Date.Grammar.formats(a);return function(a){var c=null;try{c=b.call({},a)}catch(d){return null}return c[1].length===0?c[0]:null}},Date.parseExact=function(a,b){return Date.getParseFunction(b)(a)},Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.abbrDayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.abbrMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Date.firstDayOfWeek=0,Date.format="mm/dd/yyyy",Date.fullYearStart="20",function(){function a(a,b){Date.prototype[a]||(Date.prototype[a]=b)}a("isWeekend",function(){return this.getDay()==0||this.getDay()==6}),a("isWeekDay",function(){return!this.isWeekend()}),a("setDayOfYear",function(a){return this.setMonth(0),this.setDate(a),this}),a("zeroTime",function(){return this.setMilliseconds(0),this.setSeconds(0),this.setMinutes(0),this.setHours(0),this}),a("asString",function(a){var c=a||Date.format;return c.split("yyyy").join(this.getFullYear()).split("yy").join((this.getFullYear()+"").substring(2)).split("mmmm").join(this.getMonthName(!1)).split("mmm").join(this.getMonthName(!0)).split("mm").join(b(this.getMonth()+1)).split("dd").join(b(this.getDate()))}),Date.fromString=function(a){var b=Date.format,c=new Date("01/01/1977"),d=0,e=b.indexOf("mmmm");if(e>-1){for(var f=0;f<Date.monthNames.length;f++){var g=a.substr(e,Date.monthNames[f].length);if(Date.monthNames[f]==g){d=Date.monthNames[f].length-4;break}}c.setMonth(f)}else{e=b.indexOf("mmm");if(e>-1){var g=a.substr(e,3);for(var f=0;f<Date.abbrMonthNames.length;f++)if(Date.abbrMonthNames[f]==g)break;c.setMonth(f)}else c.setMonth(Number(a.substr(b.indexOf("mm"),2))-1)}var h=b.indexOf("yyyy");h>-1?(e<h&&(h+=d),c.setFullYear(Number(a.substr(h,4)))):(e<h&&(h+=d),c.setFullYear(Number(Date.fullYearStart+a.substr(b.indexOf("yy"),2))));var i=b.indexOf("dd");return e<i&&(i+=d),c.setDate(Number(a.substr(i,2))),isNaN(c.getTime())?!1:c};var b=function(a){var b="0"+a;return b.substring(b.length-2)}}()